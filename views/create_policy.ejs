<%- include("partials/header") %>
<div class="pt-8 bg-gray-100 rounded-xl text-gray-800">
    <div id="breadcrumbs" class="-mt-2 flex gap-1 items-center text-xs px-8">
        <a href="/" class="text-gray-600">Keygen Admin</a>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
        </svg>
        <a href="/product/<%= product.id %>" class="text-gray-600"><%= product.attributes.name %></a>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
        </svg>
        <a class="text-gray-700 font-medium" href="/product/<%= product.id %>/policies/create">Create Policy</a>
    </div>

    <div class="flex items-center px-8 my-4">
        <div class="w-full">
            <h1 class="text-3xl flex gap-1 items-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                </svg>
                Create Policy
            </h1>
        </div>
    </div>

    <div class="flex flex-col gap-4 bg-gray-50 border-t border-t-gray-200 rounded-b-xl px-8 py-4">
        <% if (typeof error !== "undefined") { %>
        <div class="bg-red-100 text-red-700 p-2 rounded-md"><%= error %></div>
        <% } %>
        <form method="POST" action="/product/<%= product.id %>/policies/create" class="flex flex-col gap-2">
            <div class="font-bold text-xl mb-4"><%= product.attributes.name %></div>

            <label>
                <div>Attributes</div>
                <textarea name="data" class="w-full h-64 font-mono rounded-md border border-gray-300 p-2" required><%= typeof data !== "undefined" ? data : `{
    "name": "Paid Policy",
    "duration": null,
    "maxMachines": 5,
    "floating": true,
    "machineUniquenessStrategy": "UNIQUE_PER_POLICY"
}` %></textarea>
            </label>
            <p>
                See the <a href="https://keygen.sh/docs/api/policies/#policies-create-attrs" target="_blank" class="text-blue-500 underline">API reference</a> for more information on policy attributes.
            </p>

            <input type="submit" value="Add Policy" class="bg-blue-500 text-white rounded-md p-2 cursor-pointer" />
        </form>
    </div>


</div>
</div>
<%- include("partials/footer") %>